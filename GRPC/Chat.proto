syntax = "proto2";
import "google/protobuf/timestamp.proto";

message Mensaje {
	required string idMensaje = 1;
	required Usuario destinatario = 2;
	required Usuario remitente =3;
	required google.protobuf.Timestamp fechaEnvio = 4;
	required string contenido = 5;
	extensions 77 to 78;
}

message Archivo {
	extend Mensaje {
		optional Archivo archivo = 77;
	}
	required bytes contenido = 2;
	required string ruta = 3;
}

message Texto {
	extend Mensaje{
		optional Texto texto = 78;
	}
	required string contenido = 1;
	required bool editado = 2;
}

message Usuario {
	required string username = 1;
	required string idUsuario = 2;
		
}
message Empty{}

service Chat {
	rpc recibirMensajes(Empty) returns (stream Mensaje);
	rpc enviarMensaje(stream Mensaje) returns (Empty);
}
	
	
